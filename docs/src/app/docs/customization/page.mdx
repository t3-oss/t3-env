# Customization

Below are some examples of how you can customize the behavior of the library. The default values are shown in the snippets below.

## Skipping validation

<Callout type="warning">

Skipping validation is not encouraged and will lead to your types and runtime values being out of sync. It is available to let you opt out of validation during linting (or similar), or if you're building with Docker and not all environment variables are present when building the image.

</Callout>

```ts title="src/env.ts"
import { createEnv } from "@t3-oss/env-core";

export const env = createEnv({
  // ...
  // Tell the library to skip validation if condition is true.
  skipValidation: false,
});
```

## Overriding the default error handler

```ts title="src/env.ts"
import { createEnv } from "@t3-oss/env-core";

export const env = createEnv({
  // ...
  // Called when the schema validation fails.
  onValidationError: (error: ZodError) => {
    console.error(
      "❌ Invalid environment variables:",
      error.flatten().fieldErrors
    );
    throw new Error("Invalid environment variables");
  },
  // Called when server variables are accessed on the client.
  onInvalidAccess: (variable: string) => {
    throw new Error(
      "❌ Attempted to access a server-side environment variable on the client"
    );
  },
});
```

## Tell when we're in a server context

```ts title="src/env.ts"
import { createEnv } from "@t3-oss/env-core";

export const env = createEnv({
  // ...
  // Tell the library when we're in a server context.
  isServer: typeof window === "undefined",
});
```

## Server or Client only environment

### For Server only environments

<Callout type="warning">

Using t3-env in server only mode is not recommended because it adds unnecessary overhead to your application. You can instead use simple zod validation to validate your environment variables.

```ts title="src/env.ts"
import { z } from "zod";

export const env = z
  .object({
    DATABASE_URL: z.string(),
    CUSTOM_STUFF: z.string(),
  })
  .parse(process.env);
```

</Callout>

```ts title="src/env.ts"
import { createEnv } from "@t3-oss/env-core";

export const serverOnlyEnv = createEnv({
  // ...
  // Omit the client fields
  server: {
    DATABASE_URL: z.string(),
    CUSTOM_STUFF: z.string(),
  },
});
```

### For Client only environments

```ts title="src/env.ts"
import { createEnv } from "@t3-oss/env-core";

export const clientOnlyEnv = createEnv({
  // ...
  // Omit the server field
  clientPrefix: "FOO_",
  client: {
    FOO_SOME_CLIENT_VARIABLE: z.string(),
  },
});
```
